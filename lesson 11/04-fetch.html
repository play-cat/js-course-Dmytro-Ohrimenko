<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fetch</title>
  </head>
  <body>
    <script>
      let url = 'https://jsonplaceholder.typicode.com/todos/10';

      // fetch - надсилає HTTP запит і повертає promise, що описує асинхронну операцію
      // Результатом, доступним у проміс, є об'єкт вбудованого класу Response
      // https://fetch.spec.whatwg.org/#response-class

      // у даному випадку, при виклику fetch надсилається GET запит
      let promise = fetch(url);

      promise
        .then(response => {
          // promise не переходить у стан rejected через статус кодів 4xx та 5xx
          if (response.ok) {
            // сервер надіслав відповідь зі статусом 200-299
            alert('Ok ' + response.status);
          } else {
            alert(response.status); // виведення статусу коду, якщо відповідь пов'язана з помилкою
          }
        })
        .catch(error => console.log(error.message)); // обробка винятків, наприклад, проблем із мережею
    </script>
  </body>
</html>
